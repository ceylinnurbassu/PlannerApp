<?xml version="1.0" encoding="utf-8" ?> 
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="PlannerApp.MainPage"
             Title="Daily Planner"
             BackgroundColor="{StaticResource BackgroundLight}">

    <ScrollView>
        <VerticalStackLayout Padding="25" Spacing="20">

            <!-- 📅 Header -->
            <VerticalStackLayout Spacing="3">
                <Label Text="Today"
                       FontSize="34"
                       FontAttributes="Bold"
                       TextColor="{StaticResource PrimaryDark}" />
                <Label x:Name="DateLabel"
                       FontSize="24"
                       TextColor="{StaticResource Gray500}" />
            </VerticalStackLayout>

            <!-- ✏️ Task Entry Area -->
            <Frame BackgroundColor="White"
                   BorderColor="{StaticResource Gray300}"
                   CornerRadius="12"
                   Padding="10"
                   Margin="0,10,0,0"
                   HasShadow="True">
                <Grid ColumnDefinitions="*,Auto" RowDefinitions="Auto">
                    <Editor x:Name="TaskEntry"
                            Placeholder="Add a new task..."
                            FontSize="16"
                            AutoSize="TextChanges"
                            HeightRequest="40"
                            BackgroundColor="Transparent"
                            TextColor="{StaticResource Gray900}"
                            Grid.Column="0" />

                    <!-- Large Add Button (Fitts’s Law) -->
                    <Button Text="+"
                            Clicked="OnAddTaskClicked"
                            FontSize="20"
                            WidthRequest="40"
                            HeightRequest="40"
                            CornerRadius="20"
                            BackgroundColor="{StaticResource PrimaryLight}"
                            TextColor="{StaticResource PrimaryDark}"
                            Grid.Column="1" />
                </Grid>
            </Frame>

            <!-- 🗒️ Task List -->
            <CollectionView x:Name="TaskList"
                            Margin="0,10,0,0"
                            ItemsLayout="VerticalList">
                <CollectionView.EmptyView>
                    <Label Text="No tasks for today"
                           HorizontalOptions="Center"
                           TextColor="{StaticResource Gray500}"
                           FontSize="14"
                           Margin="0,30,0,0"/>
                </CollectionView.EmptyView>

                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame Margin="5"
                            Padding="10"
                            BackgroundColor="{Binding BackgroundColor}"
                            BorderColor="{StaticResource Gray300}"
                            CornerRadius="12"
                            HasShadow="True">

                            <!-- ✅ Grid düzeni: CheckBox | Text | Delete Button -->
                            <Grid ColumnDefinitions="Auto,*,Auto" RowDefinitions="Auto">
                                
                                <!-- CheckBox -->
                                <CheckBox Grid.Column="0"
                                        IsChecked="{Binding IsDone}"
                                        Color="{StaticResource PrimaryDark}"
                                        VerticalOptions="Center"
                                        Margin="0,0,8,0" />

                                <!-- Görev Metni -->
                                <Label Grid.Column="1"
                                    Text="{Binding DisplayText}"
                                    TextColor="{StaticResource Gray900}"
                                    FontSize="15"
                                    LineBreakMode="WordWrap"
                                    HorizontalOptions="FillAndExpand"
                                    VerticalOptions="Center"
                                    MaxLines="3"
                                    />

                                <!-- Delete Butonu -->
                                <Button Grid.Column="2"
                                        Text="✕"
                                        Clicked="OnDeleteClicked"
                                        CommandParameter="{Binding}"
                                        BackgroundColor="#FFF5F5"
                                        TextColor="#FF950505"
                                        WidthRequest="35"
                                        HeightRequest="35"
                                        CornerRadius="18"
                                        FontAttributes="Bold"
                                        VerticalOptions="Center"
                                        HorizontalOptions="End" />
                            </Grid>

                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>

            </CollectionView>

            <!-- 🧹 Clear All -->
            <Button Text="Clear All"
                    Clicked="OnClearAllClicked"
                    HorizontalOptions="Center"
                    WidthRequest="200"
                    BackgroundColor="{StaticResource PrimaryDark}"
                    TextColor="White"
                    FontAttributes="Bold"
                    CornerRadius="12"
                    Margin="0,20,0,20"/>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
