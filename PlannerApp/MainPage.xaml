<?xml version="1.0" encoding="utf-8" ?> 
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="PlannerApp.MainPage"
             Title="Daily Planner">

    <ScrollView>
        <VerticalStackLayout Padding="25" Spacing="20"
                             BackgroundColor="{StaticResource BackgroundLight}">

            <!-- 📅 Gün Başlığı -->
            <VerticalStackLayout Spacing="3">
                <Label Text="Today" FontSize="34" FontAttributes="Bold" TextColor="{StaticResource PrimaryDark}" />
                <Label x:Name="DateLabel"
                          FontSize="24"
                          TextColor="{StaticResource Gray500}" />

            </VerticalStackLayout>

           <!-- ✏️ Görev Ekleme Alanı -->
            <Frame BackgroundColor="White"
                BorderColor="{StaticResource Gray300}"
                CornerRadius="12"
                Padding="10"
                Margin="0,10,0,0"
                HasShadow="True">

                <Grid ColumnDefinitions="*,Auto" RowDefinitions="Auto">
                    <!-- Genişleyen Editor -->
                    <Editor x:Name="TaskEntry"
                            Placeholder="Add a new task..."
                            FontSize="16"
                            AutoSize="TextChanges"
                            HeightRequest="40"
                            BackgroundColor="Transparent"
                            TextColor="{StaticResource Gray900}"
                            Grid.Column="0" />

                    <!-- Ekleme butonu -->
                    <Button Text="+"
                            Clicked="OnAddTaskClicked"
                            FontSize="20"
                            WidthRequest="40"
                            HeightRequest="40"
                            CornerRadius="20"
                            BackgroundColor="#FFFFF6BC"
                            TextColor="{StaticResource PrimaryDark}"
                            Grid.Column="1" />
                </Grid>
            </Frame>

            <!-- 🗒️ Görev Listesi -->
            <CollectionView x:Name="TaskList"
                            Margin="0,10,0,0"
                            ItemsLayout="VerticalList">
                <CollectionView.EmptyView>
                    <Label Text="No tasks for today"
                           HorizontalOptions="Center"
                           TextColor="{StaticResource Gray500}"
                           FontSize="14"
                           Margin="0,30,0,0"/>
                </CollectionView.EmptyView>

                <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame Margin="5" Padding="10"
                        BackgroundColor="White"
                        BorderColor="{StaticResource Gray300}"
                        CornerRadius="12">

                        <Grid ColumnDefinitions="Auto,*,Auto" RowDefinitions="Auto,Auto">
                            <!-- CheckBox -->
                            <CheckBox Grid.Column="0"
                                    IsChecked="{Binding IsDone}"
                                    Color="#FF440F12"
                                    VerticalOptions="Start"
                                    Margin="0,4,8,0"/>

                            <!-- Görev metni -->
                            <Label Grid.Column="1"
                                Text="{Binding DisplayText}"
                                TextColor="{StaticResource Gray900}"
                                FontSize="15"
                                LineBreakMode="WordWrap"
                                VerticalOptions="Center"
                                HorizontalOptions="StartAndExpand" />

                            <!-- Silme butonu -->
                            <Button Grid.Column="2"
                                    Text="✕"
                                    Clicked="OnDeleteClicked"
                                    CommandParameter="{Binding}"
                                    BackgroundColor="#FFF5F5"
                                    TextColor="#FF950505"
                                    WidthRequest="35"
                                    HeightRequest="35"
                                    CornerRadius="18"
                                    FontAttributes="Bold"
                                    VerticalOptions="Start"
                                    HorizontalOptions="End" />
                        </Grid>

                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>

            </CollectionView>

            <!-- 🧹 Temizleme Butonu -->
            <Button Text="Clear All"
                    Clicked="OnClearAllClicked"
                    HorizontalOptions="Center"
                    WidthRequest="200"
                    BackgroundColor="{StaticResource PrimaryDark}"
                    TextColor="White"
                    FontAttributes="Bold"
                    CornerRadius="12"
                    Margin="0,20,0,20"/>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
